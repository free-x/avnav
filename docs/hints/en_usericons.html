<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>user icons</title>
    <link href="../styles.css" rel="stylesheet" type="text/css">
  </head>
  <body data-order="6000">
    <h1>User Symbols</h1>
    <div class="toc"> </div>
    <p>Since version 20201030.</p>
    <p>A couple of the symbols used in AvNav can be adapted to your preferences.
      You can resize the existing symbols, set a couple of properties or replace
      them by own symbols.</p>
    <p>If you are going to use your own symbols you need to upload them as .png
      files into the images directory - see <a href="../userdoc/downloadpage.html#userfiles">description
        for user files.</a></p>
    <p>The symbols you are going to change need to be described in a json file
      (images.json) in the user directory.</p>
    <p>An example of this file may look like:</p>
    <div class="code">{
  "boatImage": {
    "anchor": [20,0],
    "size":[40,71]
  },
  "markerImage":{
    "src": "/user/images/Marker.png",
    "anchor": [15,15],
    "size":[30,30]
  },
  "aisNormalImage-Sail":{
    "src": "/user/images/Sail-Boat-40.png",
    "anchor": [15,15],
    "size":[30,30],
    "courseVectorColor": "#ff00ff",
    "rotate":false
  },
  "aisNormalImage-Military":{
    "anchor": [32,0],
    "size":[64,120]
  }
}</div>
    <p>Since 20230614 there is a <a href="https://github.com/wellenvogel/avnav/blob/master/viewer/static/images.json">base
        configuration</a> that is used by the system. In the user images.json
      you can overwrite entries from the base config.</p>
    <p>For each symbol you want to replace there must be an entry with the
      correct name.</p>
    <h2>Common Images</h2>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>boatImage</td>
          <td>boat symbol on navigation page</td>
        </tr>
        <tr>
          <td>boatImageHdg<br>
            (20220421)</td>
          <td>boat symbol if hdt or hdm are used</td>
        </tr>
        <tr>
          <td>boatImageSteady<br>
            (20220421)</td>
          <td>boat symbol if zero SOG detect is active and no boat movement</td>
        </tr>
        <tr>
          <td>markerImage</td>
          <td>symbol for active waypoint</td>
        </tr>
        <tr>
          <td>anchorImage</td>
          <td>symbol for the anchor if anchor watch is activated</td>
        </tr>
        <tr>
          <td>measureImage</td>
          <td>symbol for the starting point of the current measure</td>
        </tr>
      </tbody>
    </table>
    <h2>AIS Images</h2>
    <p>For AIS icons you have a couple of parameters that you can consider. Each
      AIS target will be in a particular state - shown by a different color.</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>State</td>
          <td>Meaning</td>
        </tr>
        <tr>
          <td>Normal</td>
          <td>AIS target</td>
        </tr>
        <tr>
          <td>Warning</td>
          <td>the closest AIS target with a CPA lower then the threshold</td>
        </tr>
        <tr>
          <td>Tracking</td>
          <td>the AIS target you have selected at the AIS info page</td>
        </tr>
        <tr>
          <td>Nearest</td>
          <td>the closest AIS target</td>
        </tr>
      </tbody>
    </table>
    <p>Beside the state AIS icons can be defined based on the kind (Normal/Aton)
      and a couple of parameters (ship type, navigation status, aid type).</p>
    <p>Basically you could define an own icon for each combination of parameters
      and state. But from 20230614 you can leave the handling of the state
      (color) to AvNav. To make this possible you need to create the icons in a
      way that there is one color that can be replaced by the state color. You
      need to define this color in the parameter "replaceColor" (see the <a href="https://github.com/wellenvogel/avnav/blob/master/viewer/static/images.json">defaults</a>
      for examples).</p>
    <p>Basically you can define the following icons (examples):</p>
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>Key</td>
          <td>Meaning</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>aisImage</td>
          <td>default Ais icon</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>aisImage-status1</td>
          <td>Icon for AIS targets with navigationl status 1(At Anchor), see the
            <a href="https://github.com/wellenvogel/avnav/blob/d96104c8db58459d24dee180fa19c5360cab3d69/viewer/nav/aisformatter.jsx#L152">source
              code</a> for other values.</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>aisImage-Fishing</td>
          <td>Icon for AIS targets with ship type 30(Fishing), <a href="https://github.com/wellenvogel/avnav/blob/d96104c8db58459d24dee180fa19c5360cab3d69/viewer/nav/aisformatter.jsx#L120">see
              the code</a> for values</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>aisImage-Fishing-status1</td>
          <td>Icon for AIS targets with ship type 30(Fishing) and navigationl
            status 1(At Anchor)</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>aisatonImage</td>
          <td>default AIS icon for atons</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>aisatonImage-type9</td>
          <td>AIS icon for atons of aid_type 9 (Beacon, Cardinal N), <a href="https://github.com/wellenvogel/avnav/blob/d96104c8db58459d24dee180fa19c5360cab3d69/viewer/nav/aisformatter.jsx#L256">see
              the code</a> for values</td>
          <td><br>
          </td>
        </tr>
      </tbody>
    </table>
    <p>Setting of the icons uses priorities :</p>
    <ol>
      <li>aisImage-Fishing-status1</li>
      <li>aisImage-Fishing-status* (since 20250812)</li>
      <li>aisImage-status1</li>
      <li>aisImage-Fishing</li>
    </ol>
    <p>Potentially you need to define multiple entries if you want to set an
      icon for a particular type e.g. (especially before 20250812) - in the
      defaults there are already entries for status values 1,2,3,4,5,6,7 - so
      for y type "Passenger" you need to create entries for </p>
    <ul>
      <li>aisImage-Passenger-status1</li>
      <li>aisImage-Passenger-status2</li>
      <li>aisImage-Passenger-status3</li>
      <li>aisImage-Passenger-status4</li>
      <li>aisImage-Passenger-status5</li>
      <li>aisImage-Passenger-status6</li>
      <li>aisImage-Passenger-status7</li>
    </ul>
    Starting from 20250812 the definition will also accept a wildcard status. So
    for the example you can define:
    <ul>
      <li>aisImage-Passenger-status*</li>
    </ul>
    <p>If you do not want to use "replaceColor" you can define different icons
      depending on the state:</p>
    <p>aisWarningImage, aisNormalImage, aisWarningImage-status1, ...</p>
    <h2>Icon Parameters</h2>
    For each of the symbols in the file you can specify the following
    parameters:
    <table style="width: 100%" border="1">
      <tbody>
        <tr>
          <td>src</td>
          <td>The source url for the image. Normally /user/images/XYZ.png for a
            file that has been uploaded to the images folder.<br>
            If you do not specify this parameter the system will use the built
            in symbol. You still can e.g. alter the size.<br>
            Your image files should have a reasonable size (e.g. 2x the
            specified size) - but not too large as otherwise the performance
            could suffer. If you have vector graphics (like svg) you can use a
            program like <a href="https://inkscape.org">inkscape</a> to create
            png's from them.</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>size</td>
          <td>[width,height] - must be specified as an array - see the example.
            This defines the size the image will be scaled to.<br>
            If you did not specify the src parameter, size applies to the built
            in image.</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>anchor</td>
          <td>[x,y] - the point (related to the image's width, height
            coordinates) to be anchored at the item's position on the map.</td>
          <td><br>
          </td>
        </tr>
        <tr>
          <td>rotate</td>
          <td>true or false - if you set this to false the symbol will not be
            rotated according to its course.</td>
          <td>not for markerImage</td>
        </tr>
        <tr>
          <td>courseVector</td>
          <td>true or false - if you set this to false, no course vector for
            this symbol is displayed.</td>
          <td>not for markerImage</td>
        </tr>
        <tr>
          <td>courseVectorColor</td>
          <td>the color for the course vector. This allows you to adjust the
            course vector color to the image colors.</td>
          <td>not for markerImage</td>
        </tr>
        <tr>
          <td>replaceColor<br>
            (since 20230614)</td>
          <td>The color to be replaced by the state color.</td>
          <td>only ais...Image</td>
        </tr>
        <tr>
          <td>textOffset<br>
            (since 20230614)</td>
          <td>An array [x,y] for the base text offset. The system will add some
            additional offset based on the course (mainly y). The x value must
            be related to the size of your icon.</td>
          <td>only ais...lImage</td>
        </tr>
      </tbody>
    </table>
    <p>Parameters not being provided will be replaced by defaults. You can also
      only provide some parameters without an src attribute - this way you can
      e.g. change the size of AIS symbols based on there type. Normally you also
      have to adapt the anchor parameter if you change the size.</p>
    <p>When you edit the images.json you have to be careful to create valid
      json. When using the AvNav edit function at the Files/Download page <img
        src="../viewerimages/icons-new/ic_file_download.svg" alt="" class="inlineimage">(sub
      page <img src="../viewerimages/icons-new/folder_shared.svg" alt="" class="inlineimage">)
      syntax will be automatically checked when saving the file.</p>
    <p><img src="edit-images.png" alt="" class="image"></p>
    <p>After you saved the file, you need to reload AvNav.</p>
    <p><br>
    </p>
    <br>
  </body>
</html>
